import{_ as x,A as $}from"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-pbUfsUN9.js";import{b as k}from"./base-url-qR72hEjy.js";import{s as V,r as C,d as L,a as c,c as P,b as o,o as S,w as d,e as n,u as T,f as m,t as p,g as U}from"./index-D2pX98g5.js";function A(l){const e=new URLSearchParams;for(const a in l)l.hasOwnProperty(a)&&e.append(a,l[a]);return e.toString()}const B=async l=>{const e=await fetch(`${k}/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:A(l)});if(console.log(e.status),e.status<200||e.status>=300)throw new Error(e.statusText);const a=await e.json();V(a),C.replace({path:"/"})},N={class:"text-subtitle-1 text-medium-emphasis"},E={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},D=L({__name:"LoginLayout",setup(l){const e=c(!1),a=c(!1),r=c({}),v=async s=>{e.value=!0;try{await B(s)}catch(t){alert(`Failed: ${t}`)}finally{e.value=!1}};return(s,t)=>{const _=o("v-spacer"),f=o("v-app-bar"),w=o("v-img"),u=o("v-text-field"),y=o("v-btn"),b=o("v-card"),g=o("v-container"),h=o("v-app");return S(),P(h,null,{default:d(()=>[n(f,{elevation:"0",class:"px-8"},{default:d(()=>[n(_),n(x)]),_:1}),n(g,{class:"mt-12"},{default:d(()=>[n(w,{class:"mx-auto my-6","max-width":"64",src:T($)},null,8,["src"]),n(b,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:d(()=>[m("div",N,p(s.$t("email")),1),n(u,{modelValue:r.value.username,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value.username=i),type:"email",density:"compact",placeholder:s.$t("emailAddress"),"prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue","placeholder"]),m("div",E,p(s.$t("password")),1),n(u,{modelValue:r.value.password,"onUpdate:modelValue":t[1]||(t[1]=i=>r.value.password=i),class:"mb-4","append-inner-icon":a.value?"mdi-eye-off":"mdi-eye",type:a.value?"text":"password",density:"compact",placeholder:s.$t("enterPassword"),"prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":t[2]||(t[2]=i=>a.value=!a.value)},null,8,["modelValue","append-inner-icon","type","placeholder"]),n(y,{loading:e.value,disabled:e.value,class:"mb-4",color:"black",size:"large",variant:"flat",block:"",onClick:t[3]||(t[3]=i=>v(r.value))},{default:d(()=>[U(p(s.$t("login")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})}}});export{D as default};
